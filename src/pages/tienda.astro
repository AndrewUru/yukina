---
import { getEntry, render } from "astro:content";
import Main from "../layouts/MainLayout.astro";

const aboutPost = await getEntry("specs", "tienda");
const { Content } = await render(aboutPost!);

interface Producto {
  id: number;
  name: string;
  price: number;
  description: string;
}

let productos: Producto[] = [];
try {
  const response = await fetch("/api/products"); // Obtiene datos del JSON
  const data = await response.json();
  if (!data.error) productos = data;
} catch (error) {
  console.error("Error al obtener productos:", error);
}
---

<Main title="Tienda" subTitle="Productos disponibles">
  <h1>Lista de Productos</h1>
  <ul class="product-list">
    {
      productos.map((producto) => (
        <li class="product-card">
          <h2>{producto.name}</h2>
          <p class="price">{producto.price} â‚¬</p>
          <p>{producto.description}</p>
        </li>
      ))
    }
  </ul>
</Main>

<style>
  .product-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    padding: 20px;
    list-style: none;
  }

  .product-card {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    padding: 15px;
    text-align: center;
    transition:
      transform 0.3s ease-in-out,
      box-shadow 0.3s ease-in-out;
  }

  .product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
  }
</style>
